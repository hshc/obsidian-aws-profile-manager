/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/aws-profile-handler/lib/ini.js
var require_ini = __commonJS({
  "node_modules/aws-profile-handler/lib/ini.js"(exports, module2) {
    "use strict";
    var Ini2 = class {
      static decodeIniData(rawData) {
        let currentSection;
        let map = {};
        let uniqueSectionFlag = false;
        let lines = rawData.split(/\r?\n/);
        if (Ini2._emptyCheck(lines))
          return {};
        lines.forEach((line) => {
          line = line.split(/(^|\s)[;#]/)[0].trim();
          if (!line)
            return;
          let section = line.match(/^\s*\[([^\[\]]+)\]\s*$/);
          if (section && uniqueSectionFlag) {
            throw new Error("Invalid AWS credential file. Cannot have nested sessions");
          } else if (section) {
            currentSection = section[1];
            uniqueSectionFlag = true;
          } else {
            let item = line.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);
            if (item) {
              map[currentSection] = map[currentSection] || {};
              map[currentSection][item[1]] = item[2];
              uniqueSectionFlag = false;
            } else {
              throw new Error("Invalid AWS credential file. Incomplete key/value pair");
            }
          }
        });
        return map;
      }
      static encodeIniFormat(iniObject) {
        function _flattenObject(object) {
          let listObject = Object.keys(object).reduce((result, key) => {
            result.push(key + "=" + object[key]);
            return result;
          }, []);
          return listObject;
        }
        let dividedIntoListOfObjects = Object.keys(iniObject).map((session) => {
          let newObject = {};
          newObject[session] = iniObject[session];
          return newObject;
        });
        let encodedIniContentList = dividedIntoListOfObjects.reduce(
          (iniContentList, sessionObject) => {
            let sessionName = Object.keys(sessionObject)[0];
            iniContentList.push("[" + sessionName + "]");
            let listChild = _flattenObject(sessionObject[sessionName]);
            return iniContentList.concat(listChild, "");
          },
          []
        );
        return encodedIniContentList.join("\n");
      }
      static _emptyCheck(array) {
        if (array.length === 0)
          return true;
        for (let item of array) {
          if (item.trim().length !== 0) {
            return false;
          }
        }
        return true;
      }
    };
    module2.exports = Ini2;
  }
});

// node_modules/aws-profile-handler/lib/utils.js
var require_utils = __commonJS({
  "node_modules/aws-profile-handler/lib/utils.js"(exports, module2) {
    "use strict";
    var fs2 = require("fs");
    var Utils2 = class {
      static writeFile(filePath, encodedOutput) {
        fs2.writeFileSync(filePath, encodedOutput, "utf-8");
      }
      static deepCopy(object) {
        return JSON.parse(JSON.stringify(object));
      }
      static readFile(filePath) {
        return fs2.readFileSync(filePath, "utf-8");
      }
    };
    module2.exports = Utils2;
  }
});

// node_modules/aws-profile-handler/index.js
var require_aws_profile_handler = __commonJS({
  "node_modules/aws-profile-handler/index.js"(exports, module2) {
    "use strict";
    var path2 = require("path");
    var os2 = require("os");
    var Ini2 = require_ini();
    var Utils2 = require_utils();
    var defaultFilePath2 = path2.join(os2.homedir(), ".aws", "credentials");
    var awsProfileHandler = class {
      /**
       * @deprecated
       * @param filePath
       */
      constructor(filePath) {
        const defaultFilePath3 = path2.join(os2.homedir(), ".aws", "credentials");
        this.filePath = filePath || defaultFilePath3;
        this.profileObject = Ini2.decodeIniData(Utils2.readFile(this.filePath));
      }
      /**
       * @deprecated
       * @return {Array}
       */
      listProfiles() {
        return Object.keys(this.profileObject);
      }
      /**
       * @deprecated
       * @param profile
       * @return {*}
       */
      getProfileCredentials(profile) {
        let credentials = this.profileObject[profile];
        if (!credentials)
          return null;
        else
          return Utils2.deepCopy(credentials);
      }
      /**
       * @deprecated
       * @param profile
       */
      deleteProfile(profile) {
        let outputProfileObject = Utils2.deepCopy(this.profileObject);
        delete outputProfileObject[profile];
        let encodedProfile = Ini2.encodeIniFormat(outputProfileObject);
        Utils2.writeFile(this.filePath, encodedProfile);
      }
      /**
       * @deprecated
       * @param profile
       * @param credentials
       */
      addProfile(profile, credentials) {
        let outputProfileObject = Utils2.deepCopy(this.profileObject);
        outputProfileObject[profile] = credentials;
        let encodedProfile = Ini2.encodeIniFormat(outputProfileObject);
        Utils2.writeFile(this.filePath, encodedProfile);
      }
      static listProfiles(filePath) {
        let credentialPath = filePath || defaultFilePath2;
        let profileObject = Ini2.decodeIniData(Utils2.readFile(credentialPath));
        return Object.keys(profileObject);
      }
      static getProfileCredentials(profile, filePath) {
        if (!profile || profile.trim().length === 0) {
          throw new Error("Invalid Input: profile name cannot be omitted nor only contains white spaces.");
        }
        let credentialPath = filePath || defaultFilePath2;
        let profileObject = Ini2.decodeIniData(Utils2.readFile(credentialPath));
        let credentials = profileObject[profile];
        if (!credentials)
          return null;
        else
          return Utils2.deepCopy(credentials);
      }
      static deleteProfile(profile, filePath) {
        if (!profile || profile.trim().length === 0) {
          throw new Error("Invalid Input: profile name cannot be omitted nor only contains white spaces.");
        }
        let credentialPath = filePath || defaultFilePath2;
        let profileObject = Ini2.decodeIniData(Utils2.readFile(credentialPath));
        let outputProfileObject = Utils2.deepCopy(profileObject);
        delete outputProfileObject[profile];
        let encodedProfile = Ini2.encodeIniFormat(outputProfileObject);
        Utils2.writeFile(credentialPath, encodedProfile);
      }
      static addProfile(profile, credentials, filePath) {
        if (!profile || profile.trim().length === 0) {
          throw new Error("Invalid Input: profile name cannot be omitted nor only contains white spaces.");
        }
        if (!credentials || Object.keys(credentials).length === 0) {
          throw new Error("Invalid Input: credentials cannot be omitted nor empty.");
        }
        if (Object.keys(credentials).length !== 2 || !this.isValidSchema(credentials) && !this.isValidAltSchema(credentials)) {
          throw new Error("Invalid input: credentials schema is invalid.");
        }
        let credentialPath = filePath || defaultFilePath2;
        let profileObject = Ini2.decodeIniData(Utils2.readFile(credentialPath));
        let outputProfileObject = Utils2.deepCopy(profileObject);
        outputProfileObject[profile] = credentials;
        let encodedProfile = Ini2.encodeIniFormat(outputProfileObject);
        Utils2.writeFile(credentialPath, encodedProfile);
      }
      static isValidSchema(credentials) {
        return credentials.hasOwnProperty("aws_access_key_id") && credentials.hasOwnProperty("aws_secret_access_key");
      }
      static isValidAltSchema(credentials) {
        return credentials.hasOwnProperty("role_arn") && credentials.hasOwnProperty("source_profile");
      }
    };
    module2.exports = awsProfileHandler;
  }
});

// main.ts
var main_exports = {};
__export(main_exports, {
  SuggestAwsProfileModal: () => SuggestAwsProfileModal,
  default: () => AwsProfileManagerPlugin,
  getSortedProfilesCredentials: () => getSortedProfilesCredentials
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var os = __toESM(require("os"));
var path = __toESM(require("path"));
var fs = __toESM(require("fs"));
var profileHandler = __toESM(require_aws_profile_handler());
var Ini = require_ini();
var Utils = require_utils();
var defaultFilePath = path.join(os.homedir(), ".aws", "credentials");
var DEFAULT_SETTINGS = {
  mySetting: "default"
};
var DEFAULT_PROFILE = "default";
function addProfile(profile, credentials, filePath) {
  if (!profile || profile.trim().length === 0) {
    throw new Error("Invalid Input: profile name cannot be omitted nor only contains white spaces.");
  }
  if (!credentials || Object.keys(credentials).length === 0) {
    throw new Error("Invalid Input: credentials cannot be omitted nor empty.");
  }
  if (Object.keys(credentials).length < 3 || !profileHandler.isValidSchema(credentials) && !profileHandler.isValidAltSchema(credentials)) {
    throw new Error("Invalid input: credentials schema is invalid.");
  }
  let credentialPath = filePath || defaultFilePath;
  let profileObject = Ini.decodeIniData(Utils.readFile(credentialPath));
  let outputProfileObject = Utils.deepCopy(profileObject);
  outputProfileObject[profile] = credentials;
  let encodedProfile = Ini.encodeIniFormat(outputProfileObject);
  Utils.writeFile(credentialPath, encodedProfile);
}
function getSortedProfilesCredentials(includeDefaultProfile = true) {
  const credentialsFile = path.join(os.homedir(), ".aws", "credentials");
  let result = [];
  if (fs.existsSync(credentialsFile)) {
    try {
      const profiles = profileHandler.listProfiles();
      if (includeDefaultProfile === false) {
        const index = profiles.indexOf(DEFAULT_PROFILE);
        if (index > -1) {
          profiles.splice(index, 1);
        }
      }
      result = profiles.sort();
    } catch (error) {
      console.log(`File '${credentialsFile}' is not valid.`);
      console.log(error);
    }
  } else {
    console.log(`File '${credentialsFile}' does not exist.`);
  }
  return result;
}
var sortedProfilesCreds = getSortedProfilesCredentials(false);
var _a;
var originProfile = (_a = profileHandler.getProfileCredentials(DEFAULT_PROFILE)) == null ? void 0 : _a.originProfile;
var SuggestAwsProfileModal = class extends import_obsidian.SuggestModal {
  // Returns all available suggestions.
  getSuggestions(query) {
    let localsortedProfilesCreds = sortedProfilesCreds;
    let choice = localsortedProfilesCreds.filter(
      (profile) => profile.toLowerCase().includes(query.toLowerCase())
    );
    return choice;
  }
  // Renders each suggestion item.
  renderSuggestion(profile, el) {
    el.createEl("div", { text: profile });
  }
  // Perform action on the selected suggestion.
  onChooseSuggestion(profile, evt) {
    let profileCreds = profileHandler.getProfileCredentials(profile);
    profileCreds["originProfile"] = profile;
    addProfile("default", profileCreds);
    new import_obsidian.Notice(`New default profile is '${profile}'`);
    let items = document.getElementsByClassName("status-bar-item plugin-obsidian-aws-profile-manager");
    items[0].innerHTML = "";
    items[0].createEl("span", { text: "\u{1F3AD}" });
    items[0].createEl("span", { text: profile });
  }
};
var AwsProfileManagerPlugin = class extends import_obsidian.Plugin {
  async onload() {
    const item = this.addStatusBarItem();
    item.createEl("span", { text: "\u{1F3AD}" });
    if (originProfile == null) {
      item.createEl("span", { text: "Choose a profile" });
    } else {
      item.createEl("span", { text: originProfile });
    }
    this.addCommand({
      id: "switch profile",
      name: "Switch to AWS profile",
      callback: () => {
        console.log("Hey, you! " + os.homedir());
        new SuggestAwsProfileModal(this.app).open();
      }
    });
    await this.loadSettings();
    (0, import_obsidian.addIcon)("aws", '<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 455 455" fill="#FFFFFF" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path style="fill-rule:evenodd;clip-rule:evenodd;" d="M235.916,190.817c-10.274,0.966-32.834,4.09-43.941,13.309c-14.653,12.159-20.575,52.996,11.215,52.996c4.959,0,9.285-0.5,13.073-1.346c14.641-3.251,24.968-16.399,24.968-31.399v-28.722C241.231,192.791,238.768,190.545,235.916,190.817z"/><path d="M0,0v455h455V0H0z M215.655,111.854c-19.068,0-31.26,20.675-35.458,29.166c-1.041,2.116-3.351,3.277-5.673,2.885l-38.255-6.464c-3.168-0.53-5.173-3.698-4.251-6.778c4.815-16.085,23.591-59.949,85.197-59.949c75.437,0,82.607,48.625,82.607,60.468v98.509c0,0-0.314,8.416,7.169,19.015c2.399,3.382,4.34,6.073,5.878,8.155c2.649,3.59,2.202,8.58-1.03,11.659l-27.895,26.576c-3.288,3.113-8.408,3.285-11.845,0.336c-3.557-3.049-7.95-7.116-11.237-11.196c-3.068-3.796-5.445-7.244-7.114-9.846c-1.369-2.127-4.415-2.224-5.923-0.208c-6.736,9.091-24.893,28.45-57.097,28.45c-42.084,0-70.134-33.981-70.134-63.278c0-29.305,18.701-66.716,59.224-75.132c28.439-5.9,46.898-5.673,55.381-5.001c2.929,0.228,5.401-2.094,5.401-5.023v-22.7C240.601,131.499,239.668,111.865,215.655,111.854z M319.162,358.74c-24.632,13.711-48.637,25.546-105.667,25.546c-69.298,0-124.701-44.091-135.6-57.497c-10.912-13.409-7.333-20.262-7.333-20.262s4.207-8.266,16.052,0c11.845,8.252,67.335,47.226,122.51,47.226c55.176,0,93.508-14.655,105.981-19.959c12.462-5.292,26.498-11.92,29.927-5.49C348.459,334.739,343.783,345.021,319.162,358.74z M354.142,359.132c-7.267-3.937,0.239-11.931,3.274-21.508c3.038-9.588,4.676-18.004,0-22.127c-4.673-4.132-11.454-2.191-26.887-0.325c-15.424,1.877-14.492-5.143-14.492-5.143s0-2.796,3.504-5.14c3.504-2.333,50.891-21.9,62.192-4.437C395.326,321.452,362.634,363.73,354.142,359.132z"/>');
    const ribbonIconEl = this.addRibbonIcon("aws", "AWS Profile Manager", (evt) => {
      new import_obsidian.Notice("Hej Bro " + os.homedir() + ", make your aws profile choice !");
      new SuggestAwsProfileModal(this.app).open();
    });
    ribbonIconEl.addClass("my-plugin-ribbon-class");
    this.addSettingTab(new AwsProfileManagerSettingTab(this.app, this));
    this.registerDomEvent(document, "click", (evt) => {
      console.log("click", evt);
    });
    this.registerInterval(window.setInterval(() => console.log("setInterval"), 5 * 60 * 1e3));
  }
  onunload() {
    console.log("unloading plugin");
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var AwsProfileManagerSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Settings for my awesome plugin." });
    new import_obsidian.Setting(containerEl).setName("Setting #1").setDesc("It's a secret").addText((text) => text.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async (value) => {
      console.log("Secret: " + value);
      this.plugin.settings.mySetting = value;
      await this.plugin.saveSettings();
    }));
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL2F3cy1wcm9maWxlLWhhbmRsZXIvbGliL2luaS5qcyIsICJub2RlX21vZHVsZXMvYXdzLXByb2ZpbGUtaGFuZGxlci9saWIvdXRpbHMuanMiLCAibm9kZV9tb2R1bGVzL2F3cy1wcm9maWxlLWhhbmRsZXIvaW5kZXguanMiLCAibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiJ3VzZSBzdHJpY3QnO1xuXG5jbGFzcyBJbmkge1xuICAgIHN0YXRpYyBkZWNvZGVJbmlEYXRhKHJhd0RhdGEpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRTZWN0aW9uO1xuICAgICAgICBsZXQgbWFwID0ge307XG4gICAgICAgIGxldCB1bmlxdWVTZWN0aW9uRmxhZyA9IGZhbHNlO1xuICAgICAgICBsZXQgbGluZXMgPSByYXdEYXRhLnNwbGl0KC9cXHI/XFxuLyk7XG5cbiAgICAgICAgaWYgKEluaS5fZW1wdHlDaGVjayhsaW5lcykpIHJldHVybiB7fTtcblxuXG4gICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICAgICAgICAgIC8vIHRoaXMgcmVnZXggd2lsbCByZW1vdmUgY29tbWVudHMgYWZ0ZXJcbiAgICAgICAgICAgIC8vIGVhY2ggYXdzIHByb2ZpbGVcbiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnNwbGl0KC8oXnxcXHMpWzsjXS8pWzBdLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghbGluZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGxpbmUubWF0Y2goL15cXHMqXFxbKFteXFxbXFxdXSspXFxdXFxzKiQvKTtcbiAgICAgICAgICAgIGlmIChzZWN0aW9uICYmIHVuaXF1ZVNlY3Rpb25GbGFnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEFXUyBjcmVkZW50aWFsIGZpbGUuIENhbm5vdCBoYXZlIG5lc3RlZCBzZXNzaW9ucycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2VjdGlvbikge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvblsxXTtcbiAgICAgICAgICAgICAgICB1bmlxdWVTZWN0aW9uRmxhZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGxldCBpdGVtID0gbGluZS5tYXRjaCgvXlxccyooLis/KVxccyo9XFxzKiguKz8pXFxzKiQvKTtcblxuICAgICAgICAgICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcFtjdXJyZW50U2VjdGlvbl0gPSBtYXBbY3VycmVudFNlY3Rpb25dIHx8IHt9O1xuICAgICAgICAgICAgICAgICAgICBtYXBbY3VycmVudFNlY3Rpb25dW2l0ZW1bMV1dID0gaXRlbVsyXTtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlU2VjdGlvbkZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQVdTIGNyZWRlbnRpYWwgZmlsZS4gSW5jb21wbGV0ZSBrZXkvdmFsdWUgcGFpcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuXG4gICAgc3RhdGljIGVuY29kZUluaUZvcm1hdChpbmlPYmplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gX2ZsYXR0ZW5PYmplY3Qob2JqZWN0KSB7XG4gICAgICAgICAgICBsZXQgbGlzdE9iamVjdCA9IE9iamVjdC5rZXlzKG9iamVjdCkucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGtleSArIFwiPVwiICsgb2JqZWN0W2tleV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgICAgICByZXR1cm4gbGlzdE9iamVjdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkaXZpZGVkSW50b0xpc3RPZk9iamVjdHMgPSBPYmplY3Qua2V5cyhpbmlPYmplY3QpLm1hcCgoc2Vzc2lvbikgPT4ge1xuICAgICAgICAgICAgbGV0IG5ld09iamVjdCA9IHt9O1xuICAgICAgICAgICAgbmV3T2JqZWN0W3Nlc3Npb25dID0gaW5pT2JqZWN0W3Nlc3Npb25dO1xuICAgICAgICAgICAgcmV0dXJuIG5ld09iamVjdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGVuY29kZWRJbmlDb250ZW50TGlzdCA9IGRpdmlkZWRJbnRvTGlzdE9mT2JqZWN0cy5yZWR1Y2UoXG4gICAgICAgICAgICAoaW5pQ29udGVudExpc3QsIHNlc3Npb25PYmplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgc2Vzc2lvbk5hbWUgPSBPYmplY3Qua2V5cyhzZXNzaW9uT2JqZWN0KVswXTtcbiAgICAgICAgICAgICAgICBpbmlDb250ZW50TGlzdC5wdXNoKFwiW1wiICsgc2Vzc2lvbk5hbWUgKyBcIl1cIik7XG5cbiAgICAgICAgICAgICAgICBsZXQgbGlzdENoaWxkID0gX2ZsYXR0ZW5PYmplY3Qoc2Vzc2lvbk9iamVjdFtzZXNzaW9uTmFtZV0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmlDb250ZW50TGlzdC5jb25jYXQobGlzdENoaWxkLCAnJyk7XG4gICAgICAgICAgICB9LCBbXSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkSW5pQ29udGVudExpc3Quam9pbignXFxuJyk7XG4gICAgfVxuXG4gICAgc3RhdGljIF9lbXB0eUNoZWNrKGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGFycmF5KSB7XG4gICAgICAgICAgICBpZiAoaXRlbS50cmltKCkubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBJbmk7IiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jbGFzcyBVdGlscyB7XG4gICAgc3RhdGljIHdyaXRlRmlsZShmaWxlUGF0aCwgZW5jb2RlZE91dHB1dCkge1xuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBlbmNvZGVkT3V0cHV0LCAndXRmLTgnKTtcbiAgICB9XG5cbiAgICBzdGF0aWMgZGVlcENvcHkob2JqZWN0KSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xuICAgIH1cblxuICAgIHN0YXRpYyByZWFkRmlsZShmaWxlUGF0aCkge1xuICAgICAgICByZXR1cm4gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAndXRmLTgnKTtcbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7IiwgIid1c2Ugc3RyaWN0JztcblxuY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKTtcbmNvbnN0IEluaSA9IHJlcXVpcmUoJy4vbGliL2luaScpO1xuY29uc3QgVXRpbHMgPSByZXF1aXJlKCcuL2xpYi91dGlscycpO1xuY29uc3QgZGVmYXVsdEZpbGVQYXRoID0gcGF0aC5qb2luKG9zLmhvbWVkaXIoKSwgJy5hd3MnLCAnY3JlZGVudGlhbHMnKTtcblxuY2xhc3MgYXdzUHJvZmlsZUhhbmRsZXIge1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHBhcmFtIGZpbGVQYXRoXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZmlsZVBhdGgpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdEZpbGVQYXRoID0gcGF0aC5qb2luKG9zLmhvbWVkaXIoKSwgJy5hd3MnLCAnY3JlZGVudGlhbHMnKTtcbiAgICAgICAgdGhpcy5maWxlUGF0aCA9IGZpbGVQYXRoIHx8IGRlZmF1bHRGaWxlUGF0aDtcbiAgICAgICAgdGhpcy5wcm9maWxlT2JqZWN0ID0gSW5pLmRlY29kZUluaURhdGEoVXRpbHMucmVhZEZpbGUodGhpcy5maWxlUGF0aCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICovXG4gICAgbGlzdFByb2ZpbGVzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5wcm9maWxlT2JqZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIEBwYXJhbSBwcm9maWxlXG4gICAgICogQHJldHVybiB7Kn1cbiAgICAgKi9cbiAgICBnZXRQcm9maWxlQ3JlZGVudGlhbHMocHJvZmlsZSkge1xuICAgICAgICBsZXQgY3JlZGVudGlhbHMgPSB0aGlzLnByb2ZpbGVPYmplY3RbcHJvZmlsZV07XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHJldHVybiBudWxsO1xuICAgICAgICBlbHNlIHJldHVybiBVdGlscy5kZWVwQ29weShjcmVkZW50aWFscyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBAcGFyYW0gcHJvZmlsZVxuICAgICAqL1xuICAgIGRlbGV0ZVByb2ZpbGUocHJvZmlsZSkge1xuICAgICAgICBsZXQgb3V0cHV0UHJvZmlsZU9iamVjdCA9IFV0aWxzLmRlZXBDb3B5KHRoaXMucHJvZmlsZU9iamVjdCk7XG4gICAgICAgIGRlbGV0ZSBvdXRwdXRQcm9maWxlT2JqZWN0W3Byb2ZpbGVdO1xuICAgICAgICBsZXQgZW5jb2RlZFByb2ZpbGUgPSBJbmkuZW5jb2RlSW5pRm9ybWF0KG91dHB1dFByb2ZpbGVPYmplY3QpO1xuICAgICAgICBVdGlscy53cml0ZUZpbGUodGhpcy5maWxlUGF0aCwgZW5jb2RlZFByb2ZpbGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogQHBhcmFtIHByb2ZpbGVcbiAgICAgKiBAcGFyYW0gY3JlZGVudGlhbHNcbiAgICAgKi9cbiAgICBhZGRQcm9maWxlKHByb2ZpbGUsIGNyZWRlbnRpYWxzKSB7XG4gICAgICAgIGxldCBvdXRwdXRQcm9maWxlT2JqZWN0ID0gVXRpbHMuZGVlcENvcHkodGhpcy5wcm9maWxlT2JqZWN0KTtcbiAgICAgICAgb3V0cHV0UHJvZmlsZU9iamVjdFtwcm9maWxlXSA9IGNyZWRlbnRpYWxzO1xuICAgICAgICBsZXQgZW5jb2RlZFByb2ZpbGUgPSBJbmkuZW5jb2RlSW5pRm9ybWF0KG91dHB1dFByb2ZpbGVPYmplY3QpO1xuICAgICAgICBVdGlscy53cml0ZUZpbGUodGhpcy5maWxlUGF0aCwgZW5jb2RlZFByb2ZpbGUpO1xuICAgIH1cblxuICAgIHN0YXRpYyBsaXN0UHJvZmlsZXMoZmlsZVBhdGgpIHtcbiAgICAgICAgbGV0IGNyZWRlbnRpYWxQYXRoID0gZmlsZVBhdGggfHwgZGVmYXVsdEZpbGVQYXRoO1xuICAgICAgICBsZXQgcHJvZmlsZU9iamVjdCA9IEluaS5kZWNvZGVJbmlEYXRhKFV0aWxzLnJlYWRGaWxlKGNyZWRlbnRpYWxQYXRoKSk7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHByb2ZpbGVPYmplY3QpO1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXRQcm9maWxlQ3JlZGVudGlhbHMocHJvZmlsZSwgZmlsZVBhdGgpIHtcbiAgICAgICAgaWYgKCFwcm9maWxlIHx8IHByb2ZpbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIElucHV0OiBwcm9maWxlIG5hbWUgY2Fubm90IGJlIG9taXR0ZWQgbm9yIG9ubHkgY29udGFpbnMgd2hpdGUgc3BhY2VzLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjcmVkZW50aWFsUGF0aCA9IGZpbGVQYXRoIHx8IGRlZmF1bHRGaWxlUGF0aDtcbiAgICAgICAgbGV0IHByb2ZpbGVPYmplY3QgPSBJbmkuZGVjb2RlSW5pRGF0YShVdGlscy5yZWFkRmlsZShjcmVkZW50aWFsUGF0aCkpO1xuXG4gICAgICAgIGxldCBjcmVkZW50aWFscyA9IHByb2ZpbGVPYmplY3RbcHJvZmlsZV07XG4gICAgICAgIGlmICghY3JlZGVudGlhbHMpIHJldHVybiBudWxsO1xuICAgICAgICBlbHNlIHJldHVybiBVdGlscy5kZWVwQ29weShjcmVkZW50aWFscyk7XG4gICAgfVxuXG4gICAgc3RhdGljIGRlbGV0ZVByb2ZpbGUocHJvZmlsZSwgZmlsZVBhdGgpIHtcbiAgICAgICAgaWYgKCFwcm9maWxlIHx8IHByb2ZpbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIElucHV0OiBwcm9maWxlIG5hbWUgY2Fubm90IGJlIG9taXR0ZWQgbm9yIG9ubHkgY29udGFpbnMgd2hpdGUgc3BhY2VzLicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjcmVkZW50aWFsUGF0aCA9IGZpbGVQYXRoIHx8IGRlZmF1bHRGaWxlUGF0aDtcbiAgICAgICAgbGV0IHByb2ZpbGVPYmplY3QgPSBJbmkuZGVjb2RlSW5pRGF0YShVdGlscy5yZWFkRmlsZShjcmVkZW50aWFsUGF0aCkpO1xuXG4gICAgICAgIC8vIHByb2ZpbGVPYmplY3Qgd2lsbCBuZXZlciBiZSAnbnVsbCcuIHdvcnN0IGNhc2UgaXMge31cbiAgICAgICAgbGV0IG91dHB1dFByb2ZpbGVPYmplY3QgPSBVdGlscy5kZWVwQ29weShwcm9maWxlT2JqZWN0KTtcbiAgICAgICAgZGVsZXRlIG91dHB1dFByb2ZpbGVPYmplY3RbcHJvZmlsZV07XG4gICAgICAgIGxldCBlbmNvZGVkUHJvZmlsZSA9IEluaS5lbmNvZGVJbmlGb3JtYXQob3V0cHV0UHJvZmlsZU9iamVjdCk7XG4gICAgICAgIFV0aWxzLndyaXRlRmlsZShjcmVkZW50aWFsUGF0aCwgZW5jb2RlZFByb2ZpbGUpO1xuICAgIH1cblxuICAgIHN0YXRpYyBhZGRQcm9maWxlKHByb2ZpbGUsIGNyZWRlbnRpYWxzLCBmaWxlUGF0aCkge1xuICAgICAgICBpZiAoIXByb2ZpbGUgfHwgcHJvZmlsZS50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSW5wdXQ6IHByb2ZpbGUgbmFtZSBjYW5ub3QgYmUgb21pdHRlZCBub3Igb25seSBjb250YWlucyB3aGl0ZSBzcGFjZXMuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNyZWRlbnRpYWxzIHx8IE9iamVjdC5rZXlzKGNyZWRlbnRpYWxzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJbnB1dDogY3JlZGVudGlhbHMgY2Fubm90IGJlIG9taXR0ZWQgbm9yIGVtcHR5LicpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKGNyZWRlbnRpYWxzKS5sZW5ndGggIT09IDIgfHxcbiAgICAgICAgICAgICF0aGlzLmlzVmFsaWRTY2hlbWEoY3JlZGVudGlhbHMpICYmXG4gICAgICAgICAgICAhdGhpcy5pc1ZhbGlkQWx0U2NoZW1hKGNyZWRlbnRpYWxzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0OiBjcmVkZW50aWFscyBzY2hlbWEgaXMgaW52YWxpZC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBjcmVkZW50aWFsUGF0aCA9IGZpbGVQYXRoIHx8IGRlZmF1bHRGaWxlUGF0aDtcbiAgICAgICAgbGV0IHByb2ZpbGVPYmplY3QgPSBJbmkuZGVjb2RlSW5pRGF0YShVdGlscy5yZWFkRmlsZShjcmVkZW50aWFsUGF0aCkpO1xuXG4gICAgICAgIGxldCBvdXRwdXRQcm9maWxlT2JqZWN0ID0gVXRpbHMuZGVlcENvcHkocHJvZmlsZU9iamVjdCk7XG4gICAgICAgIG91dHB1dFByb2ZpbGVPYmplY3RbcHJvZmlsZV0gPSBjcmVkZW50aWFscztcbiAgICAgICAgbGV0IGVuY29kZWRQcm9maWxlID0gSW5pLmVuY29kZUluaUZvcm1hdChvdXRwdXRQcm9maWxlT2JqZWN0KTtcbiAgICAgICAgVXRpbHMud3JpdGVGaWxlKGNyZWRlbnRpYWxQYXRoLCBlbmNvZGVkUHJvZmlsZSk7XG4gICAgfVxuXG4gICAgc3RhdGljIGlzVmFsaWRTY2hlbWEoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgcmV0dXJuIChjcmVkZW50aWFscy5oYXNPd25Qcm9wZXJ0eSgnYXdzX2FjY2Vzc19rZXlfaWQnKSAmJiBjcmVkZW50aWFscy5oYXNPd25Qcm9wZXJ0eSgnYXdzX3NlY3JldF9hY2Nlc3Nfa2V5JykpXG4gICAgfVxuXG4gICAgc3RhdGljIGlzVmFsaWRBbHRTY2hlbWEoY3JlZGVudGlhbHMpIHtcbiAgICAgICAgcmV0dXJuIChjcmVkZW50aWFscy5oYXNPd25Qcm9wZXJ0eSgncm9sZV9hcm4nKSAmJiBjcmVkZW50aWFscy5oYXNPd25Qcm9wZXJ0eSgnc291cmNlX3Byb2ZpbGUnKSlcbiAgICB9ICAgIFxufVxubW9kdWxlLmV4cG9ydHMgPSBhd3NQcm9maWxlSGFuZGxlcjtcblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE1hcmtkb3duVmlldywgTW9kYWwsIE5vdGljZSwgYWRkSWNvbiwgc2V0SWNvbiwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBTdWdnZXN0TW9kYWwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcHJvZmlsZUhhbmRsZXIgZnJvbSAnYXdzLXByb2ZpbGUtaGFuZGxlcic7XG4vLyBpbXBvcnQge0luaSwgVXRpbHN9IGZyb20gJ2F3cy1wcm9maWxlLWhhbmRsZXInO1xuXG5pbnRlcmZhY2UgQXdzUHJvZmlsZU1hbmFnZXJTZXR0aW5ncyB7XG5cdG15U2V0dGluZzogc3RyaW5nO1xufVxuXG5jb25zdCBJbmkgPSByZXF1aXJlKCcuL25vZGVfbW9kdWxlcy9hd3MtcHJvZmlsZS1oYW5kbGVyL2xpYi9pbmknKTtcbmNvbnN0IFV0aWxzID0gcmVxdWlyZSgnLi9ub2RlX21vZHVsZXMvYXdzLXByb2ZpbGUtaGFuZGxlci9saWIvdXRpbHMnKTtcbmNvbnN0IGRlZmF1bHRGaWxlUGF0aCA9IHBhdGguam9pbihvcy5ob21lZGlyKCksICcuYXdzJywgJ2NyZWRlbnRpYWxzJyk7XG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBBd3NQcm9maWxlTWFuYWdlclNldHRpbmdzID0ge1xuXHRteVNldHRpbmc6ICdkZWZhdWx0J1xufVxuY29uc3QgREVGQVVMVF9QUk9GSUxFID0gJ2RlZmF1bHQnO1xuXG4vLyBhZGQgYSBwcm9maWxlIGluIHRoZSAuYXdzL2NyZWRlbnRpYWxzIGZpbGVcbmZ1bmN0aW9uIGFkZFByb2ZpbGUocHJvZmlsZTogc3RyaW5nLCBjcmVkZW50aWFsczogT2JqZWN0LCBmaWxlUGF0aCA/OiBzdHJpbmcpIHtcblx0aWYgKCFwcm9maWxlIHx8IHByb2ZpbGUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJbnB1dDogcHJvZmlsZSBuYW1lIGNhbm5vdCBiZSBvbWl0dGVkIG5vciBvbmx5IGNvbnRhaW5zIHdoaXRlIHNwYWNlcy4nKTtcblx0fVxuXG5cdGlmICghY3JlZGVudGlhbHMgfHwgT2JqZWN0LmtleXMoY3JlZGVudGlhbHMpLmxlbmd0aCA9PT0gMCkge1xuXHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJbnB1dDogY3JlZGVudGlhbHMgY2Fubm90IGJlIG9taXR0ZWQgbm9yIGVtcHR5LicpO1xuXHR9XG5cblx0aWYgKE9iamVjdC5rZXlzKGNyZWRlbnRpYWxzKS5sZW5ndGggPCAzIHx8XG5cdFx0IXByb2ZpbGVIYW5kbGVyLmlzVmFsaWRTY2hlbWEoY3JlZGVudGlhbHMpICYmXG5cdFx0IXByb2ZpbGVIYW5kbGVyLmlzVmFsaWRBbHRTY2hlbWEoY3JlZGVudGlhbHMpKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGlucHV0OiBjcmVkZW50aWFscyBzY2hlbWEgaXMgaW52YWxpZC4nKTtcblx0fVxuXG5cdGxldCBjcmVkZW50aWFsUGF0aCA9IGZpbGVQYXRoIHx8IGRlZmF1bHRGaWxlUGF0aDtcblx0bGV0IHByb2ZpbGVPYmplY3QgPSBJbmkuZGVjb2RlSW5pRGF0YShVdGlscy5yZWFkRmlsZShjcmVkZW50aWFsUGF0aCkpO1xuXG5cdGxldCBvdXRwdXRQcm9maWxlT2JqZWN0ID0gVXRpbHMuZGVlcENvcHkocHJvZmlsZU9iamVjdCk7XG5cdG91dHB1dFByb2ZpbGVPYmplY3RbcHJvZmlsZV0gPSBjcmVkZW50aWFscztcblx0bGV0IGVuY29kZWRQcm9maWxlID0gSW5pLmVuY29kZUluaUZvcm1hdChvdXRwdXRQcm9maWxlT2JqZWN0KTtcblx0VXRpbHMud3JpdGVGaWxlKGNyZWRlbnRpYWxQYXRoLCBlbmNvZGVkUHJvZmlsZSk7XG59XG5cblxuXG4vLyBsaXN0IGFuZCBvcmRlciBpbiBhbiBhcnJheSBhbGwgdGhlIHByb2ZpbGVzIHRoYXQgYXJlIGF2YWlsYWJsZSBpbiB0aGUgLmF3cy9jcmVkZW50aWFscyBmaWxlXG5leHBvcnQgZnVuY3Rpb24gZ2V0U29ydGVkUHJvZmlsZXNDcmVkZW50aWFscyhpbmNsdWRlRGVmYXVsdFByb2ZpbGUgPSB0cnVlKSB7XG5cdGNvbnN0IGNyZWRlbnRpYWxzRmlsZSA9IHBhdGguam9pbihvcy5ob21lZGlyKCksICcuYXdzJywgJ2NyZWRlbnRpYWxzJyk7XG5cdGxldCByZXN1bHQgPSBbXTtcblxuXHRpZiAoZnMuZXhpc3RzU3luYyhjcmVkZW50aWFsc0ZpbGUpKSB7XG5cblx0XHQvLyBsaXN0UHJvZmlsZSB3aWxsIGNoZWNrIGlmIGZpbGUgaXMgdmFsaWQuIElmIGl0J3Mgbm90IHZhbGlkLFxuXHRcdC8vIG5vIG5lZWQgdG8gcHJvY2VlZCwganVzdCBjYWxsYmFjayB0aGUgZXJyb3IuXG5cdFx0dHJ5IHtcblx0XHRcdC8vIGlmIHRoZSBjcmVkZW50aWFsIGZpbGUgaXMgZW1wdHksIENMSSB3aWxsIG5hbWUgdGhlIGZpcnN0IHByb2ZpbGUgYXMgJ2RlZmF1bHQnXG5cdFx0XHRjb25zdCBwcm9maWxlcyA9IHByb2ZpbGVIYW5kbGVyLmxpc3RQcm9maWxlcygpO1xuXG5cdFx0XHRpZiAoaW5jbHVkZURlZmF1bHRQcm9maWxlID09PSBmYWxzZSkge1xuXHRcdFx0XHRjb25zdCBpbmRleCA9IHByb2ZpbGVzLmluZGV4T2YoREVGQVVMVF9QUk9GSUxFKTtcblxuXHRcdFx0XHRpZiAoaW5kZXggPiAtMSkge1xuXHRcdFx0XHRcdHByb2ZpbGVzLnNwbGljZShpbmRleCwgMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmVzdWx0ID0gcHJvZmlsZXMuc29ydCgpO1xuXG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdGNvbnNvbGUubG9nKGBGaWxlICcke2NyZWRlbnRpYWxzRmlsZX0nIGlzIG5vdCB2YWxpZC5gKTtcblx0XHRcdGNvbnNvbGUubG9nKGVycm9yKTtcblx0XHR9XG5cblx0fVxuXHRlbHNlIHtcblx0XHRjb25zb2xlLmxvZyhgRmlsZSAnJHtjcmVkZW50aWFsc0ZpbGV9JyBkb2VzIG5vdCBleGlzdC5gKTtcblx0fVxuXG5cdHJldHVybiByZXN1bHQ7XG59XG5cblxuLy8gZXhwb3J0IGNsYXNzIEV4YW1wbGVNb2RhbF8xIGV4dGVuZHMgTW9kYWwge1xuLy8gXHRyZXN1bHQ6IHN0cmluZztcbi8vIFx0b25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZDtcblxuLy8gXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgb25TdWJtaXQ6IChyZXN1bHQ6IHN0cmluZykgPT4gdm9pZCkge1xuLy8gXHRcdHN1cGVyKGFwcCk7XG4vLyBcdFx0dGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuLy8gXHR9XG5cbi8vIFx0b25PcGVuKCkge1xuLy8gXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG4vLyBcdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIldoYXQncyB5b3VyIG5hbWU/XCIgfSk7XG5cbi8vIFx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG4vLyBcdFx0XHQuc2V0TmFtZShcIk5hbWVcIilcbi8vIFx0XHRcdC5hZGRUZXh0KCh0ZXh0KSA9PlxuLy8gXHRcdFx0XHR0ZXh0Lm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuLy8gXHRcdFx0XHRcdHRoaXMucmVzdWx0ID0gdmFsdWVcbi8vIFx0XHRcdFx0fSkpO1xuXG4vLyBcdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuLy8gXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuLy8gXHRcdFx0XHRidG5cbi8vIFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIlN1Ym1pdFwiKVxuLy8gXHRcdFx0XHRcdC5zZXRDdGEoKVxuLy8gXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcbi8vIFx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcbi8vIFx0XHRcdFx0XHRcdHRoaXMub25TdWJtaXQodGhpcy5yZXN1bHQpO1xuLy8gXHRcdFx0XHRcdH0pKTtcbi8vIFx0fVxuXG4vLyBcdG9uQ2xvc2UoKSB7XG4vLyBcdFx0bGV0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuLy8gXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuLy8gXHR9XG4vLyB9XG5cbmNvbnN0IHNvcnRlZFByb2ZpbGVzQ3JlZHMgPSBnZXRTb3J0ZWRQcm9maWxlc0NyZWRlbnRpYWxzKGZhbHNlKTsgXG5jb25zdCBvcmlnaW5Qcm9maWxlID0gKDxSZWNvcmQ8c3RyaW5nLHN0cmluZz4+cHJvZmlsZUhhbmRsZXIuZ2V0UHJvZmlsZUNyZWRlbnRpYWxzKERFRkFVTFRfUFJPRklMRSkpPy5vcmlnaW5Qcm9maWxlO1xuXG5leHBvcnQgY2xhc3MgU3VnZ2VzdEF3c1Byb2ZpbGVNb2RhbCBleHRlbmRzIFN1Z2dlc3RNb2RhbDxTdHJpbmc+IHtcblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBTdHJpbmdbXSB7XG5cdFx0bGV0IGxvY2Fsc29ydGVkUHJvZmlsZXNDcmVkcyA9IHNvcnRlZFByb2ZpbGVzQ3JlZHM7XG5cdFx0bGV0IGNob2ljZSA9IGxvY2Fsc29ydGVkUHJvZmlsZXNDcmVkcy5maWx0ZXIoKHByb2ZpbGU6IHN0cmluZykgPT5cblx0XHRcdHByb2ZpbGUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeS50b0xvd2VyQ2FzZSgpKVxuXHRcdCk7XG5cdFx0cmV0dXJuIGNob2ljZVxuXHR9XG5cblx0Ly8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cblx0cmVuZGVyU3VnZ2VzdGlvbihwcm9maWxlOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogcHJvZmlsZSB9KTtcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRvbkNob29zZVN1Z2dlc3Rpb24ocHJvZmlsZTogc3RyaW5nLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KSB7XG5cdFx0bGV0IHByb2ZpbGVDcmVkcyA9IDxSZWNvcmQ8c3RyaW5nLHN0cmluZz4+cHJvZmlsZUhhbmRsZXIuZ2V0UHJvZmlsZUNyZWRlbnRpYWxzKHByb2ZpbGUpO1xuXHRcdHByb2ZpbGVDcmVkc1tcIm9yaWdpblByb2ZpbGVcIl0gPSBwcm9maWxlO1xuXHRcdGFkZFByb2ZpbGUoXCJkZWZhdWx0XCIsIHByb2ZpbGVDcmVkcyk7XG5cdFx0bmV3IE5vdGljZShgTmV3IGRlZmF1bHQgcHJvZmlsZSBpcyAnJHtwcm9maWxlfSdgKTtcblx0XHRsZXQgaXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwic3RhdHVzLWJhci1pdGVtIHBsdWdpbi1vYnNpZGlhbi1hd3MtcHJvZmlsZS1tYW5hZ2VyXCIpO1xuXHRcdGl0ZW1zWzBdLmlubmVySFRNTCA9IFwiXCI7XG5cdFx0aXRlbXNbMF0uY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcdUQ4M0NcdURGQURcIiB9KTtcblx0XHRpdGVtc1swXS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBwcm9maWxlIH0pO1xuXHR9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF3c1Byb2ZpbGVNYW5hZ2VyUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IEF3c1Byb2ZpbGVNYW5hZ2VyU2V0dGluZ3M7XG5cdHN0YXR1c0Jhckl0ZW1FbDogSFRNTEVsZW1lbnQ7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdC8vIFRoaXMgYWRkcyBhIHN0YXR1cyBiYXIgaXRlbSB0byB0aGUgYm90dG9tIG9mIHRoZSBhcHAuIERvZXMgbm90IHdvcmsgb24gbW9iaWxlIGFwcHMuXG5cdFx0Y29uc3QgaXRlbSA9IHRoaXMuYWRkU3RhdHVzQmFySXRlbSgpO1xuXHRcdGl0ZW0uY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJcdUQ4M0NcdURGQURcIiB9KTtcblx0XHRpZiAob3JpZ2luUHJvZmlsZSA9PSBudWxsKSB7XG5cdFx0XHRpdGVtLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IFwiQ2hvb3NlIGEgcHJvZmlsZVwiIH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRpdGVtLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IG9yaWdpblByb2ZpbGUgfSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiBcInN3aXRjaCBwcm9maWxlXCIsXG5cdFx0XHRuYW1lOiBcIlN3aXRjaCB0byBBV1MgcHJvZmlsZVwiLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc29sZS5sb2coXCJIZXksIHlvdSEgXCIrb3MuaG9tZWRpcigpKTtcblx0XHRcdFx0bmV3IFN1Z2dlc3RBd3NQcm9maWxlTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcblx0XHRcdH0sXG5cdFx0XHRcblx0XHR9KTtcblxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvLyBUaGlzIGNyZWF0ZXMgYW4gaWNvbiBpbiB0aGUgbGVmdCByaWJib24uXG5cdFx0YWRkSWNvbihcImF3c1wiLCAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIxMDBcIiBoZWlnaHQ9XCIxMDBcIiB2aWV3Qm94PVwiMCAwIDQ1NSA0NTVcIiBmaWxsPVwiI0ZGRkZGRlwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIHN0cm9rZS13aWR0aD1cIjJcIiBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIj48cGF0aCBzdHlsZT1cImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO1wiIGQ9XCJNMjM1LjkxNiwxOTAuODE3Yy0xMC4yNzQsMC45NjYtMzIuODM0LDQuMDktNDMuOTQxLDEzLjMwOWMtMTQuNjUzLDEyLjE1OS0yMC41NzUsNTIuOTk2LDExLjIxNSw1Mi45OTZjNC45NTksMCw5LjI4NS0wLjUsMTMuMDczLTEuMzQ2YzE0LjY0MS0zLjI1MSwyNC45NjgtMTYuMzk5LDI0Ljk2OC0zMS4zOTl2LTI4LjcyMkMyNDEuMjMxLDE5Mi43OTEsMjM4Ljc2OCwxOTAuNTQ1LDIzNS45MTYsMTkwLjgxN3pcIi8+PHBhdGggZD1cIk0wLDB2NDU1aDQ1NVYwSDB6IE0yMTUuNjU1LDExMS44NTRjLTE5LjA2OCwwLTMxLjI2LDIwLjY3NS0zNS40NTgsMjkuMTY2Yy0xLjA0MSwyLjExNi0zLjM1MSwzLjI3Ny01LjY3MywyLjg4NWwtMzguMjU1LTYuNDY0Yy0zLjE2OC0wLjUzLTUuMTczLTMuNjk4LTQuMjUxLTYuNzc4YzQuODE1LTE2LjA4NSwyMy41OTEtNTkuOTQ5LDg1LjE5Ny01OS45NDljNzUuNDM3LDAsODIuNjA3LDQ4LjYyNSw4Mi42MDcsNjAuNDY4djk4LjUwOWMwLDAtMC4zMTQsOC40MTYsNy4xNjksMTkuMDE1YzIuMzk5LDMuMzgyLDQuMzQsNi4wNzMsNS44NzgsOC4xNTVjMi42NDksMy41OSwyLjIwMiw4LjU4LTEuMDMsMTEuNjU5bC0yNy44OTUsMjYuNTc2Yy0zLjI4OCwzLjExMy04LjQwOCwzLjI4NS0xMS44NDUsMC4zMzZjLTMuNTU3LTMuMDQ5LTcuOTUtNy4xMTYtMTEuMjM3LTExLjE5NmMtMy4wNjgtMy43OTYtNS40NDUtNy4yNDQtNy4xMTQtOS44NDZjLTEuMzY5LTIuMTI3LTQuNDE1LTIuMjI0LTUuOTIzLTAuMjA4Yy02LjczNiw5LjA5MS0yNC44OTMsMjguNDUtNTcuMDk3LDI4LjQ1Yy00Mi4wODQsMC03MC4xMzQtMzMuOTgxLTcwLjEzNC02My4yNzhjMC0yOS4zMDUsMTguNzAxLTY2LjcxNiw1OS4yMjQtNzUuMTMyYzI4LjQzOS01LjksNDYuODk4LTUuNjczLDU1LjM4MS01LjAwMWMyLjkyOSwwLjIyOCw1LjQwMS0yLjA5NCw1LjQwMS01LjAyM3YtMjIuN0MyNDAuNjAxLDEzMS40OTksMjM5LjY2OCwxMTEuODY1LDIxNS42NTUsMTExLjg1NHogTTMxOS4xNjIsMzU4Ljc0Yy0yNC42MzIsMTMuNzExLTQ4LjYzNywyNS41NDYtMTA1LjY2NywyNS41NDZjLTY5LjI5OCwwLTEyNC43MDEtNDQuMDkxLTEzNS42LTU3LjQ5N2MtMTAuOTEyLTEzLjQwOS03LjMzMy0yMC4yNjItNy4zMzMtMjAuMjYyczQuMjA3LTguMjY2LDE2LjA1MiwwYzExLjg0NSw4LjI1Miw2Ny4zMzUsNDcuMjI2LDEyMi41MSw0Ny4yMjZjNTUuMTc2LDAsOTMuNTA4LTE0LjY1NSwxMDUuOTgxLTE5Ljk1OWMxMi40NjItNS4yOTIsMjYuNDk4LTExLjkyLDI5LjkyNy01LjQ5QzM0OC40NTksMzM0LjczOSwzNDMuNzgzLDM0NS4wMjEsMzE5LjE2MiwzNTguNzR6IE0zNTQuMTQyLDM1OS4xMzJjLTcuMjY3LTMuOTM3LDAuMjM5LTExLjkzMSwzLjI3NC0yMS41MDhjMy4wMzgtOS41ODgsNC42NzYtMTguMDA0LDAtMjIuMTI3Yy00LjY3My00LjEzMi0xMS40NTQtMi4xOTEtMjYuODg3LTAuMzI1Yy0xNS40MjQsMS44NzctMTQuNDkyLTUuMTQzLTE0LjQ5Mi01LjE0M3MwLTIuNzk2LDMuNTA0LTUuMTRjMy41MDQtMi4zMzMsNTAuODkxLTIxLjksNjIuMTkyLTQuNDM3QzM5NS4zMjYsMzIxLjQ1MiwzNjIuNjM0LDM2My43MywzNTQuMTQyLDM1OS4xMzJ6XCIvPicpO1xuXG5cdFx0Y29uc3QgcmliYm9uSWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKCdhd3MnLCAnQVdTIFByb2ZpbGUgTWFuYWdlcicsIChldnQ6IE1vdXNlRXZlbnQpID0+IHtcblx0XHRcdC8vIENhbGxlZCB3aGVuIHRoZSB1c2VyIGNsaWNrcyB0aGUgaWNvbi5cblx0XHRcdG5ldyBOb3RpY2UoJ0hlaiBCcm8gJytvcy5ob21lZGlyKCkrJywgbWFrZSB5b3VyIGF3cyBwcm9maWxlIGNob2ljZSAhJyk7XG5cdFx0XHRuZXcgU3VnZ2VzdEF3c1Byb2ZpbGVNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xuXHRcdH0pO1xuXHRcdC8vIFBlcmZvcm0gYWRkaXRpb25hbCB0aGluZ3Mgd2l0aCB0aGUgcmliYm9uXG5cdFx0cmliYm9uSWNvbkVsLmFkZENsYXNzKCdteS1wbHVnaW4tcmliYm9uLWNsYXNzJyk7XG5cblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBBd3NQcm9maWxlTWFuYWdlclNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXG5cdFx0Ly8gVXNpbmcgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgcmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB3aGVuIHRoaXMgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2NsaWNrJywgKGV2dDogTW91c2VFdmVudCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJ2NsaWNrJywgZXZ0KTtcblx0XHR9KTtcblxuXHRcdC8vIFdoZW4gcmVnaXN0ZXJpbmcgaW50ZXJ2YWxzLCB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSBjbGVhciB0aGUgaW50ZXJ2YWwgd2hlbiB0aGUgcGx1Z2luIGlzIGRpc2FibGVkLlxuXHRcdHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKCd1bmxvYWRpbmcgcGx1Z2luJyk7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBBd3NQcm9maWxlTWFuYWdlclNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBBd3NQcm9maWxlTWFuYWdlclBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBBd3NQcm9maWxlTWFuYWdlclBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdTZXR0aW5ncyBmb3IgbXkgYXdlc29tZSBwbHVnaW4uJ30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU2V0dGluZyAjMScpXG5cdFx0XHQuc2V0RGVzYygnSXRcXCdzIGEgc2VjcmV0Jylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgc2VjcmV0Jylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm15U2V0dGluZylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdTZWNyZXQ6ICcgKyB2YWx1ZSk7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubXlTZXR0aW5nID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0fVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUEseURBQUFBLFNBQUE7QUFBQTtBQUVBLFFBQU1DLE9BQU4sTUFBVTtBQUFBLE1BQ04sT0FBTyxjQUFjLFNBQVM7QUFDMUIsWUFBSTtBQUNKLFlBQUksTUFBTSxDQUFDO0FBQ1gsWUFBSSxvQkFBb0I7QUFDeEIsWUFBSSxRQUFRLFFBQVEsTUFBTSxP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QztBQUN0RCxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxZQUFXLElBQUk7QUFFdEIsZ0JBQVksTUFBTTtBQUVsQixnQkFBWSxTQUFTLE1BQU0sRUFBQyxNQUFNLGtDQUFpQyxDQUFDO0FBRXBFLFFBQUksd0JBQVEsV0FBVyxFQUNyQixRQUFRLFlBQVksRUFDcEIsUUFBUSxlQUFnQixFQUN4QixRQUFRLFVBQVEsS0FDZixlQUFlLG1CQUFtQixFQUNsQyxTQUFTLEtBQUssT0FBTyxTQUFTLFNBQVMsRUFDdkMsU0FBUyxPQUFPLFVBQVU7QUFDMUIsY0FBUSxJQUFJLGFBQWEsS0FBSztBQUM5QixXQUFLLE9BQU8sU0FBUyxZQUFZO0FBQ2pDLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQUM7QUFBQSxFQUNMO0FBQ0Q7IiwKICAibmFtZXMiOiBbIm1vZHVsZSIsICJJbmkiLCAibW9kdWxlIiwgImZzIiwgIlV0aWxzIiwgIm1vZHVsZSIsICJwYXRoIiwgIm9zIiwgIkluaSIsICJVdGlscyIsICJkZWZhdWx0RmlsZVBhdGgiXQp9Cg==
